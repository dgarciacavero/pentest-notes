
## Llave normal

Si por cualquier motivo se encontrase una llave ssh, esta puede ser utilizada para loguearse sin contraseña por ssh. Sin embargo, como se puede ver en el siguiente comando, se necesita conocer un usuario:

```ssh -i id_rsa user@ip```

Por otro lado, la conexión ssh con la llave puede estar protegida con contraseña:
![[Pasted image 20231110130544.png]]
Si esto ocurre, es posible obtener un hash de dicha contraseña para crackearla offline. Para ello se puede utilizar la herramienta ssh2john.
`python2 ssh2john.py id_rsa > hash `
Con el texto que la herramienta devuelva, utilizar john de forma normal para crackearla:
`johh -w:/usr/share/wordlist/rockyou.txt hash`


## Authorized keys

Si se encuentra un archivo llamado "Authorized keys" (normalmente se encuentra en el directorio home bajo el directorio oculto .ssh/). Este archivo almacena las llaves ssh que el servidor "conoce" y permite que se conecten sin password. Es posible eliminarlo y añadir uno propio, que contenga nuestra propia llave para permitirnos la conexión.

1. Eliminar el archivo authorized_keys
2. Generar nuestras propias llaves (en nuestra máquina) Comando: `ssh-keygen`
3. Pasar el archivo id_rsa.pub al objetivo mediante un servidor web python por ejemplo.
4. Cambiar el nombre de id_rsa.pub en el objetivo al que tenía antes (authorized_keys).
5. Darle permisos a nuestra clave privada (id_rsa) en nuestra máquina. Comando: `chmod 600 id_rsa`
6. Login ssh con la llave: Comando: `ssh -i id_rsa user@ip`
